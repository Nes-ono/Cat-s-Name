# 拼音转换功能集成说明

## 功能说明

已成功将拼音转换功能集成到"小毛球互动"项目中。现在语音识别结果会通过后端API获取准确的拼音和声调信息。

## 使用方法

### 1. 启动后端服务

在拼音转换项目目录中启动后端服务：

```bash
cd C:\Users\15797\Desktop\拼音
npm start
```

后端服务将在 `http://localhost:3000` 运行。

### 2. 配置API地址

如果后端服务运行在不同端口或地址，请修改 `script.js` 文件中的配置：

```javascript
const CONFIG = {
    PINYIN_API_URL: 'http://localhost:3000/api/convert',  // 修改为你的后端地址
    ENABLE_PINYIN_API: true  // 设置为 false 可禁用API，使用备用方法
};
```

### 3. 使用功能

- 语音识别后，系统会自动调用后端API获取拼音信息
- 识别结果显示区域会显示：
  - 识别到的文字
  - 每个字的拼音
  - 字数分类（2/3/4/5字）
  - 声调（1/2/3/4声）

## 备用方法

如果后端服务未运行或API调用失败，系统会自动使用备用方法：
- 根据字符数判断字数
- 根据Unicode值模拟声调

## 注意事项

1. **CORS配置**：如果前后端不在同一域名，需要在后端 `server.js` 中配置CORS
2. **网络连接**：确保前端可以访问后端API地址
3. **错误处理**：API调用失败时会自动降级到备用方法，不影响基本功能

## 修改的文件

- `script.js` - 修改了 `processSpeechResult` 函数，添加了API调用逻辑

## 测试

1. 启动后端服务
2. 打开网页
3. 进行语音识别
4. 查看识别结果区域，应该能看到拼音信息

